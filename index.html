<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Max's Boss Battle: Brain Quest</title>
<style>
body{margin:0;padding:0;font-family:"Comic Sans MS",sans-serif;text-align:center;background:#000;color:#fff;overflow-x:hidden}
#game{max-width:800px;margin:20px auto;padding:15px;background:#fafafa;color:#222;border-radius:15px;box-shadow:0 0 20px rgba(0,0,0,.4)}
h1{margin:10px 0;font-size:1.8em;color:#1b3c6e;text-shadow:1px 1px 2px #fff}

/* LEVEL SELECTOR */
#level-selector{
background:#e3f2fd;
padding:20px;
border-radius:10px;
margin:15px 0;
}
#level-selector h2{margin-top:0;color:#1565c0}
.level-btn{
display:inline-block;
margin:8px;
padding:15px 25px;
background:#2196F3;
color:#fff;
border:none;
border-radius:10px;
cursor:pointer;
font-size:16px;
font-weight:bold;
transition:all .3s;
}
.level-btn:hover{
background:#1976D2;
transform:scale(1.05);
}
.level-btn.selected{
background:#0D47A1;
border:3px solid #FFD700;
}

/* CONTROLS */
#controls{
display:flex;
justify-content:center;
gap:10px;
margin:10px 0;
flex-wrap:wrap;
}
#pause-btn,#music-btn{
background:#FF9800;
color:#fff;
padding:8px 16px;
border:none;
border-radius:8px;
cursor:pointer;
font-size:14px;
font-weight:bold;
}
#pause-btn:hover,#music-btn:hover{
background:#F57C00;
}
.paused{
background:#666!important;
}

#status{display:flex;justify-content:space-around;background:#cde4ff;border-radius:10px;padding:8px;font-weight:700;margin-bottom:10px;flex-wrap:wrap}
#status>div{padding:4px;font-size:14px}
#progress-bar-container{background:#e0e0e0;border-radius:10px;height:25px;margin:10px 0;overflow:hidden;position:relative}
#progress-bar{background:linear-gradient(90deg,#4CAF50 0%,#45a049 100%);height:100%;width:0%;transition:width .3s ease;border-radius:10px}
#progress-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-weight:700;color:#222;font-size:14px}
#battlefield{position:relative;height:240px;margin:10px 0;overflow:hidden;border-radius:12px;background:#111}
#bg,#boss,#minion,#dice{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);user-select:none}
#bg{width:100%;height:100%;object-fit:cover;opacity:.85;z-index:1}
#boss{width:280px;opacity:.35;z-index:2;transition:filter .3s}
#minion{width:140px;opacity:0;z-index:3;transition:transform .5s ease,opacity .5s ease}
#dice{width:120px;height:120px;z-index:4;opacity:0;transition:opacity .3s;border-radius:15px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px rgba(0,0,0,.4)}
#dice-label{color:#fff;font-weight:700;font-size:18px;text-align:center;padding:10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}
#question-area{background:#eef7ff;border-radius:10px;padding:12px;min-height:200px}
#category{font-size:1.3em;font-weight:700;color:#1b3c6e;margin:5px 0}
#question-counter{font-size:.9em;color:#555;margin:5px 0;font-weight:700}
#question{font-size:1.05em;margin:10px 0;min-height:60px;display:flex;align-items:center;justify-content:center;padding:10px;line-height:1.4}
input[type=text]{padding:10px;font-size:16px;border-radius:8px;border:2px solid #999;width:70%;margin:10px 0}
button{background:#4CAF50;color:#fff;padding:10px 20px;margin:6px;border:none;border-radius:10px;cursor:pointer;font-size:16px}
button:hover{background:#3e8e41}
#next-round-btn{
background:#FF6B6B;
font-size:18px;
padding:15px 30px;
animation:pulse 1s infinite;
}
#timer{font-size:1.2em;font-weight:700;color:#d32f2f;margin:8px 0}
#feedback{font-weight:700;min-height:30px;font-size:1.1em;margin:10px 0}
#difficulty{background:#fff3cd;padding:8px;border-radius:8px;margin:10px 0;font-weight:700}

@keyframes rollAndBounce{
0%{transform:translate(-50%,-50%) rotate(0deg) scale(1);opacity:1}
15%{transform:translate(80%,-80%) rotate(180deg) scale(1.2)}
30%{transform:translate(-90%,20%) rotate(360deg) scale(.9)}
45%{transform:translate(70%,70%) rotate(540deg) scale(1.1)}
60%{transform:translate(-60%,-50%) rotate(720deg) scale(1)}
75%{transform:translate(20%,40%) rotate(900deg) scale(1.05)}
90%,100%{transform:translate(-50%,-50%) rotate(1080deg) scale(1);opacity:1}
}
@keyframes minionAttack{
0%{transform:translate(-50%,-50%) scale(1)}
20%{transform:translate(-30%,-30%) scale(1.1) rotate(-5deg)}
40%{transform:translate(-10%,-10%) scale(1.2) rotate(5deg)}
60%{transform:translate(10%,10%) scale(1.3) rotate(-5deg)}
80%{transform:translate(30%,30%) scale(1.2) rotate(5deg)}
100%{transform:translate(50%,50%) scale(1.1)}
}
@keyframes minionDefeat{
0%{transform:translate(50%,50%) scale(1.1);opacity:1}
50%{transform:translate(50%,50%) scale(.5) rotate(180deg);opacity:.5}
100%{transform:translate(50%,80%) scale(.1) rotate(360deg);opacity:0}
}
@keyframes victoryPulse{
0%,100%{transform:scale(1);filter:brightness(100%)}
50%{transform:scale(1.05);filter:brightness(120%)}
}
@keyframes celebrate{
0%{transform:translateY(0) scale(1)}
25%{transform:translateY(-20px) scale(1.1)}
50%{transform:translateY(0) scale(1)}
75%{transform:translateY(-10px) scale(1.05)}
100%{transform:translateY(0) scale(1)}
}
@keyframes starBurst{
0%{transform:scale(0) rotate(0deg);opacity:0}
50%{transform:scale(1.5) rotate(180deg);opacity:1}
100%{transform:scale(1) rotate(360deg);opacity:0}
}
.roll-anim{animation:rollAndBounce 2s cubic-bezier(.68,-.55,.265,1.55)}
.boss-hit{filter:brightness(250%) drop-shadow(0 0 15px red);animation:shake .3s}
.minion-attacking{animation:minionAttack 1s ease-in}
.minion-defeated{animation:minionDefeat .8s ease-out forwards}
.victory-celebration{animation:celebrate 1s ease-in-out}
.victory-pulse{animation:victoryPulse .5s ease-in-out 3}
#achievements{display:none;text-align:left;background:#fff9e0;color:#000;border-radius:10px;padding:15px;margin-top:10px}
#achievements h3{text-align:center;margin-top:0}
#achievements ul{list-style:none;padding:0}
#achievements li{padding:6px;border-bottom:1px dashed #ccc}
.correct-feedback{color:#2e7d32;animation:pulse .5s}
.wrong-feedback{color:#c62828;animation:shake .5s}
@keyframes pulse{
0%,100%{transform:scale(1)}
50%{transform:scale(1.1)}
}
@keyframes shake{
0%,100%{transform:translateX(0)}
10%,30%,50%,70%,90%{transform:translateX(-5px)}
20%,40%,60%,80%{transform:translateX(5px)}
}
#victory-stars{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:10}
.star{position:absolute;font-size:40px;animation:starBurst 1s ease-out forwards}
@media(max-width:600px){
#game{margin:10px;padding:10px}
h1{font-size:1.4em}
#status>div{font-size:12px}
#question{font-size:1em}
}
</style>
</head>
<body>
<div id="game">
<h1>ğŸ§  Max's Boss Battle ğŸ‰</h1>

<div id="level-selector">
<h2>Choose Your Starting Level</h2>
<button class="level-btn" data-level="1">Level 1<br><small>Grade 2</small></button>
<button class="level-btn" data-level="2">Level 2<br><small>Grade 2-3</small></button>
<button class="level-btn" data-level="3">Level 3<br><small>Grade 3</small></button>
<button class="level-btn" data-level="4">Level 4<br><small>Grade 3-4</small></button>
<button class="level-btn" data-level="5">Level 5<br><small>Grade 4</small></button>
<button class="level-btn" data-level="6">Level 6<br><small>Grade 4-5</small></button>
<button class="level-btn" data-level="7">Level 7<br><small>Grade 5</small></button>
<button class="level-btn" data-level="8">Level 8+<br><small>Challenge</small></button>
</div>

<div id="controls" style="display:none">
<button id="pause-btn">â¸ï¸ Pause</button>
<button id="music-btn">ğŸ”Š Music On</button>
</div>

<div id="difficulty" style="display:none">Level <span id="diff-level">1</span> - Grade <span id="grade-level">2</span></div>
<div id="status" style="display:none">
<div>â¤ï¸ HP: <span id="hp">100</span></div>
<div>â­ Level: <span id="level">1</span></div>
<div>ğŸ‘¾ Left: <span id="minions">10</span></div>
<div>ğŸ”¥ Streak: <span id="streak">0</span></div>
</div>
<div id="progress-bar-container" style="display:none">
<div id="progress-bar"></div>
<div id="progress-text">Round: 0/10</div>
</div>
<div id="battlefield">
<div id="victory-stars"></div>
<img id="bg" src="https://cdn.pixabay.com/photo/2021/04/28/08/06/forest-6212405_960_720.jpg">
<img id="boss" src="assets/boss.png">
<img id="minion" src="assets/minion1.png">
<div id="dice"><div id="dice-label">?</div></div>
</div>
<div id="question-area">
<p id="category">Get ready...</p>
<p id="question-counter"></p>
<p id="question">Select your starting level above!</p>
<input type="text" id="answer" placeholder="Type your answer..." style="display:none">
<button id="submit" style="display:none">Submit Answer</button>
<button id="start-btn" style="display:none">Start Game</button>
<button id="next-round-btn" style="display:none">Start Next Round!</button>
<p id="timer"></p>
<p id="feedback"></p>
</div>
<div id="achievements">
<h3>ğŸ† Game Over</h3>
<ul id="ach-list"></ul>
<button id="restart">Play Again</button>
</div>
</div>

<audio id="bgMusic" loop>
<source src="data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAADhAC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7v/////////////////////////////////" type="audio/mp3">
</audio>

<script>
const sfx={
roll:new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_63180b83a9.mp3?filename=dice-roll-1-111840.mp3"),
correct:new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_77a22f85b4.mp3?filename=correct-2-46134.mp3"),
wrong:new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_373d347bfb.mp3?filename=error-126627.mp3")
};

const D=i=>document.getElementById(i);
const hpEl=D("hp"),lvlEl=D("level"),minEl=D("minions"),stkEl=D("streak"),
catEl=D("category"),qEl=D("question"),ansEl=D("answer"),subBtn=D("submit"),
fbEl=D("feedback"),diceEl=D("dice"),diceLblEl=D("dice-label"),
minionEl=D("minion"),bossEl=D("boss"),timerEl=D("timer"),
achEl=D("achievements"),achList=D("ach-list"),
startBtn=D("start-btn"),restartBtn=D("restart"),
diffLvlEl=D("diff-level"),gradeLvlEl=D("grade-level"),
qCntEl=D("question-counter"),progBarEl=D("progress-bar"),
progTxtEl=D("progress-text"),starsEl=D("victory-stars"),
levelSelector=D("level-selector"),pauseBtn=D("pause-btn"),
musicBtn=D("music-btn"),bgMusic=D("bgMusic"),
nextRoundBtn=D("next-round-btn"),controls=D("controls");

let hp=100,lvl=1,minions=10,totalMin=10,streak=0,bestStreak=0,
totCorrect=0,totQ=0,timer,timeLeft=30,curQ=null,curCat="",
diffLvl=1,gameOn=false,bossMode=false,bossHP=40,paused=false,
musicOn=false,waitingForNextRound=false,selectedStartLevel=1;

// EXPANDED QUESTION BANK with Atlanta Braves & Japan/Philippines
const Q={
1:{
math:[
{q:"What is the sum of 5 plus 3?",a:"8"},
{q:"If you have 10 apples and eat 4, how many are left?",a:"6"},
{q:"What is 2 added to 2?",a:"4"},
{q:"What is 7 minus 3?",a:"4"},
{q:"Add 6 and 2 together. What do you get?",a:"8"},
{q:"Subtract 5 from 9. What is the answer?",a:"4"},
{q:"What is 3 plus 4 equal to?",a:"7"},
{q:"What is 8 take away 2?",a:"6"},
{q:"What number do you get when you add 4 and 5?",a:"9"},
{q:"What is 10 minus 7?",a:"3"},
{q:"How many sides does a triangle have?",a:"3"},
{q:"What is 2 times 2?",a:"4"},
{q:"Multiply 3 by 2. What is the product?",a:"6"},
{q:"What is 5 multiplied by 2?",a:"10"},
{q:"What is half of 10?",a:"5"},
{q:"What is 1 plus 1?",a:"2"},
{q:"Take 1 away from 6. What remains?",a:"5"},
{q:"What is the sum of 7 and 2?",a:"9"},
{q:"Add 8 and 1. What is your answer?",a:"9"},
{q:"Subtract 4 from 9. What do you get?",a:"5"},
{q:"What is 5 added to 5?",a:"10"},
{q:"What is 12 minus 6?",a:"6"},
{q:"Double the number 3. What do you get?",a:"6"},
{q:"What is 8 take away 4?",a:"4"},
{q:"Add 2 to 5. What is the total?",a:"7"},
{q:"What is 11 minus 5?",a:"6"},
{q:"What do you get when you add 4 and 4?",a:"8"},
{q:"Subtract 3 from 10. What is left?",a:"7"},
{q:"What is 6 plus 3?",a:"9"},
{q:"What is 7 take away 2?",a:"5"}
],
language:[
{q:"What is the opposite word of 'hot'?",a:"cold"},
{q:"What word means the opposite of 'up'?",a:"down"},
{q:"How many vowels are there in the English alphabet?",a:"5"},
{q:"What is the plural form of the word 'cat'?",a:"cats"},
{q:"What letter comes immediately after the letter A?",a:"b"},
{q:"What do you call a large body of water like the Atlantic?",a:"ocean"},
{q:"What word means the opposite of 'big'?",a:"small"},
{q:"What color is the sky on a clear day?",a:"blue"},
{q:"What day of the week comes after Monday?",a:"tuesday"},
{q:"What is the word for water that has been frozen solid?",a:"ice"},
{q:"What word means the opposite of 'sad'?",a:"happy"},
{q:"How do you spell the number that comes after seven?",a:"eight"},
{q:"What animal makes the sound 'meow'?",a:"cat"},
{q:"What do you call the opposite of nighttime?",a:"day"},
{q:"What color do you make when you mix red and blue together?",a:"purple"},
{q:"What word is the opposite of 'slow'?",a:"fast"},
{q:"What do you call a baby dog?",a:"puppy"},
{q:"What is the opposite word of 'old'?",a:"young"},
{q:"What is another word for H2O?",a:"water"},
{q:"What is the plural of 'box'?",a:"boxes"}
],
science:[
{q:"How many legs does a spider have in total?",a:"8"},
{q:"What color is most grass that you see?",a:"green"},
{q:"What sweet food do bees make in their hive?",a:"honey"},
{q:"How many days are there in one week?",a:"7"},
{q:"What season comes right after winter?",a:"spring"},
{q:"What white liquid do cows give us to drink?",a:"milk"},
{q:"What is the name of the planet we live on?",a:"earth"},
{q:"How many months are in one year?",a:"12"},
{q:"Besides water, what else do plants need from the sky to grow?",a:"sunlight"},
{q:"What animal has a very long nose called a trunk?",a:"elephant"},
{q:"What does a caterpillar turn into when it grows up?",a:"butterfly"},
{q:"How many legs does a dog have?",a:"4"},
{q:"What color is the sun when you see it in the sky?",a:"yellow"},
{q:"What round objects do chickens lay?",a:"eggs"},
{q:"What do we call water when it freezes?",a:"ice"}
],
riddles:[
{q:"What has hands on its face but cannot clap them?",a:"clock",time:45},
{q:"What is full of many holes but can still hold water?",a:"sponge",time:45},
{q:"What has a face and two hands but no arms or legs?",a:"clock",time:45},
{q:"What gets wet while it is drying something?",a:"towel",time:45},
{q:"What needs to be broken before you can use it?",a:"egg",time:45},
{q:"What is tall when it's young but short when it's old?",a:"candle",time:45},
{q:"What can you catch but you cannot throw?",a:"cold",time:45},
{q:"What has a long neck but no head?",a:"bottle",time:45},
{q:"What begins with T, ends with T, and has T inside?",a:"teapot",time:45},
{q:"What runs all day but never walks anywhere?",a:"water",time:45}
],
sports:[
{q:"How many bases are there on a baseball field?",a:"4"},
{q:"What sport uses a bat and a ball?",a:"baseball"},
{q:"What is the name of the Atlanta baseball team?",a:"braves"},
{q:"What is the Braves home stadium called?",a:"truist park"},
{q:"How many players are on a soccer team when on the field?",a:"11"},
{q:"What is it called when you score a point in soccer?",a:"goal"},
{q:"In baseball, how many strikes before you're out?",a:"3"},
{q:"What sport has a player called a goalie?",a:"soccer"},
{q:"In baseball, what do you run to after you hit the ball?",a:"base"},
{q:"What do you kick in the game of soccer?",a:"ball"}
],
japan_philippines:[
{q:"What is the capital city of Japan?",a:"tokyo"},
{q:"What is the capital city of the Philippines?",a:"manila"},
{q:"What ocean is Japan in?",a:"pacific"},
{q:"What is the famous mountain in Japan?",a:"fuji"},
{q:"What ocean surrounds the Philippines?",a:"pacific"},
{q:"What is sushi made from?",a:"rice"},
{q:"How many main islands does Japan have?",a:"4"},
{q:"What language do people speak in Japan?",a:"japanese"},
{q:"What language do many Filipinos speak besides Tagalog?",a:"english"},
{q:"What is the traditional Japanese robe called?",a:"kimono"}
],
geography:[
{q:"What is the capital city of the United States?",a:"washington dc"},
{q:"How many continents are there on Earth?",a:"7"},
{q:"What is the tallest mountain in the entire world?",a:"everest"},
{q:"What ocean is on the east coast of the United States?",a:"atlantic"},
{q:"What country is directly south of the United States?",a:"mexico"},
{q:"What is the largest country by land area?",a:"russia"},
{q:"What continent is Egypt in?",a:"africa"},
{q:"What is the capital city of France?",a:"paris"},
{q:"What is the longest river in the world?",a:"nile"},
{q:"In what state is the Grand Canyon?",a:"arizona"},
{q:"What country is directly north of the United States?",a:"canada"},
{q:"What is the capital of England?",a:"london"},
{q:"What ocean is on the west coast of the United States?",a:"pacific"},
{q:"What is the smallest continent?",a:"australia"},
{q:"What country has the Great Wall?",a:"china"}
],
logic:[
{q:"What number comes next: 2, 4, 6, 8, __?",a:"10"},
{q:"What comes next in the pattern: A, B, C, D, __?",a:"e"},
{q:"If you have 2 apples and get 2 more, how many total?",a:"4"},
{q:"What shape has 3 sides?",a:"triangle"},
{q:"What number is missing: 1, 2, __, 4, 5?",a:"3"},
{q:"What comes after Monday, Tuesday, __?",a:"wednesday"},
{q:"If all dogs are animals, is your pet dog an animal?",a:"yes"},
{q:"What number comes before 10?",a:"9"},
{q:"Complete the pattern: red, blue, red, blue, __?",a:"red"},
{q:"How many sides does a square have?",a:"4"}
]
},
2:{
math:[
{q:"What is the total when you add 12 and 8 together?",a:"20"},
{q:"If you subtract 7 from 15, what number do you get?",a:"8"},
{q:"What is the product of 3 times 4?",a:"12"},
{q:"Divide 20 by 4. What is the quotient?",a:"5"},
{q:"Multiply 6 by 3. What is your answer?",a:"18"},
{q:"What is 25 minus 10?",a:"15"},
{q:"What is 7 multiplied by 2?",a:"14"},
{q:"What do you get when you divide 16 by 2?",a:"8"},
{q:"Add 11 and 9. What is the sum?",a:"20"},
{q:"What is the product when you multiply 4 times 5?",a:"20"},
{q:"Subtract 9 from 18. What remains?",a:"9"},
{q:"What is 8 times 3 equal to?",a:"24"},
{q:"Divide 30 by 5. What is the result?",a:"6"},
{q:"What is the sum of 13 plus 7?",a:"20"},
{q:"Multiply 9 by 2. What do you get?",a:"18"}
],
language:[
{q:"What is the plural form of the word 'child'?",a:"children"},
{q:"How do you spell a word that means 'not quiet' or 'noisy'?",a:"loud"},
{q:"What type of word is 'run' - is it a noun or a verb?",a:"verb"},
{q:"What word means the opposite of 'light' when talking about weight?",a:"heavy"},
{q:"What is a word that rhymes with 'cat'?",a:"bat"},
{q:"How many syllables are in the word 'elephant'?",a:"3"},
{q:"How do you spell the word for a baby dog?",a:"puppy"},
{q:"What punctuation mark goes at the end of a question?",a:"question mark"},
{q:"How do you spell a word that means 'very happy'?",a:"excited"},
{q:"What is the plural form of 'mouse'?",a:"mice"}
],
science:[
{q:"How many planets are in our solar system?",a:"8"},
{q:"What gas do plants breathe in from the air?",a:"carbon dioxide"},
{q:"What is the name of the largest ocean on Earth?",a:"pacific"},
{q:"What is the chemical H2O commonly known as?",a:"water"},
{q:"What gas do we breathe in to stay alive?",a:"oxygen"},
{q:"What object is at the center of our solar system?",a:"sun"},
{q:"What do you call an animal that eats only plants?",a:"herbivore"},
{q:"About how many bones are in the human body?",a:"206"},
{q:"What is the hardest natural substance found on Earth?",a:"diamond"},
{q:"What force pulls all objects down toward the Earth?",a:"gravity"}
],
riddles:[
{q:"What object has many keys but cannot open any locks?",a:"piano",time:50},
{q:"What small item can travel around the world while staying in a corner?",a:"stamp",time:50},
{q:"What type of building has the most stories in it?",a:"library",time:50},
{q:"What thing goes up as you get older but never comes down?",a:"age",time:50},
{q:"What can speak without a mouth and hear without any ears?",a:"echo",time:50},
{q:"What has a head and a tail but has no body at all?",a:"coin",time:50},
{q:"What comes once in minute, twice in moment, never in thousand years?",a:"m",time:50},
{q:"What can you hold in your hands without touching it?",a:"breath",time:50},
{q:"What has words written inside but never speaks?",a:"book",time:50},
{q:"What belongs to you but is used more by other people?",a:"name",time:50}
],
sports:[
{q:"Which team won the World Series in 2021?",a:"braves"},
{q:"What year did the Braves win their most recent World Series?",a:"2021"},
{q:"Who is the Braves star player who won MVP in 2023?",a:"acuna"},
{q:"What is the Atlanta Braves mascot's name?",a:"blooper"},
{q:"In what city do the Atlanta Braves play?",a:"atlanta"},
{q:"What is the Braves home stadium called?",a:"truist park"},
{q:"Who was the Braves pitcher who won the Cy Young in 2021?",a:"fried"},
{q:"What state are the Atlanta Braves in?",a:"georgia"},
{q:"How many World Series has the Braves franchise won?",a:"4"},
{q:"What year did Truist Park open?",a:"2017"}
],
japan_philippines:[
{q:"What is the capital city of Japan?",a:"tokyo"},
{q:"What is the capital of the Philippines?",a:"manila"},
{q:"What is the famous volcano mountain in Japan called?",a:"mount fuji"},
{q:"What ocean are both Japan and Philippines in?",a:"pacific"},
{q:"What is traditional Japanese food with raw fish called?",a:"sushi"},
{q:"What is the largest island in the Philippines?",a:"luzon"},
{q:"What do Japanese people call their emperor?",a:"emperor"},
{q:"How many main islands make up Japan?",a:"4"},
{q:"What martial art comes from Japan?",a:"karate"},
{q:"What is the traditional Filipino shirt called?",a:"barong"}
]
}
};

const CAT={
math:"ğŸ”¢ MATH",
language:"ğŸ“– LANGUAGE",
science:"ğŸ”¬ SCIENCE",
geography:"ğŸŒ GEOGRAPHY",
riddles:"ğŸ¤” RIDDLES",
logic:"ğŸ§© LOGIC",
sports:"âš¾ ATLANTA BRAVES & SPORTS",
japan_philippines:"ğŸ—¾ JAPAN & PHILIPPINES"
};

// LEVEL SELECTOR
document.querySelectorAll('.level-btn').forEach(btn=>{
btn.onclick=()=>{
document.querySelectorAll('.level-btn').forEach(b=>b.classList.remove('selected'));
btn.classList.add('selected');
selectedStartLevel=parseInt(btn.dataset.level);
startBtn.style.display='inline-block';
qEl.textContent='Press Start Game to begin!';
};
});

// PAUSE FUNCTIONALITY
pauseBtn.onclick=()=>{
paused=!paused;
if(paused){
clearInterval(timer);
pauseBtn.textContent='â–¶ï¸ Resume';
pauseBtn.classList.add('paused');
fbEl.textContent='â¸ï¸ Game Paused';
if(musicOn)bgMusic.pause();
}else{
pauseBtn.textContent='â¸ï¸ Pause';
pauseBtn.classList.remove('paused');
fbEl.textContent='';
if(musicOn)bgMusic.play();
if(gameOn&&!waitingForNextRound){
timer=setInterval(()=>{
timeLeft--;
updateTimer();
if(timeLeft<=0){
clearInterval(timer);
wrong("â° Time's up!");
}
},1000);
}
}
};

// MUSIC TOGGLE
musicBtn.onclick=()=>{
musicOn=!musicOn;
if(musicOn){
bgMusic.play();
musicBtn.textContent='ğŸ”‡ Music Off';
}else{
bgMusic.pause();
musicBtn.textContent='ğŸ”Š Music On';
}
};

// NEXT ROUND BUTTON
nextRoundBtn.onclick=()=>{
waitingForNextRound=false;
nextRoundBtn.style.display='none';
nextQ();
};

const getDiff=()=>{
if(lvl<=2)return 1;
if(lvl<=4)return 2;
return 1;
};

const updateDiff=()=>{
diffLvl=getDiff();
diffLvlEl.textContent=diffLvl;
const gradeMap={1:"2nd",2:"2nd-3rd"};
gradeLvlEl.textContent=gradeMap[diffLvl]||"2nd";
};

const updateProg=()=>{
const done=totalMin-minions;
const pct=(done/totalMin)*100;
progBarEl.style.width=pct+"%";
progTxtEl.textContent=`Round: ${done}/${totalMin}`;
};

const updateQCnt=()=>{
const done=totalMin-minions;
if(bossMode){
qCntEl.textContent=`ğŸ‰ BOSS FIGHT - Boss HP: ${bossHP}`;
}else{
qCntEl.textContent=`Question ${done+1} of ${totalMin} | Minions Left: ${minions}`;
}
};

const getCat=()=>{
const cats=Object.keys(Q[diffLvl]);
return cats[Math.floor(Math.random()*cats.length)];
};

const getQ=(c)=>{
const qs=Q[diffLvl][c];
return qs[Math.floor(Math.random()*qs.length)];
};

const showVictoryAnimation=()=>{
for(let i=0;i<10;i++){
const star=document.createElement('div');
star.className='star';
star.textContent=['â­','ğŸŒŸ','âœ¨','ğŸ’«'][Math.floor(Math.random()*4)];
star.style.left=Math.random()*100+'%';
star.style.top=Math.random()*100+'%';
star.style.animationDelay=i*0.1+'s';
starsEl.appendChild(star);
setTimeout(()=>star.remove(),1000);
}
};

const minionAttack=()=>{
minionEl.classList.add('minion-attacking');
setTimeout(()=>minionEl.classList.remove('minion-attacking'),1000);
};

const minionDefeated=()=>{
minionEl.classList.add('minion-defeated');
setTimeout(()=>{
minionEl.classList.remove('minion-defeated');
minionEl.style.opacity=0;
},800);
};

const rollDice=(cb)=>{
sfx.roll.play().catch(()=>{});
diceEl.style.opacity=1;
diceLblEl.textContent="?";
diceEl.classList.add("roll-anim");
let rc=0;
const ri=setInterval(()=>{
const tc=getCat();
diceLblEl.textContent=CAT[tc].split(" ")[1];
rc++;
if(rc>=8)clearInterval(ri);
},150);
setTimeout(()=>{
diceEl.classList.remove("roll-anim");
const fc=getCat();
curCat=fc;
diceLblEl.textContent=CAT[fc].split(" ")[1];
setTimeout(()=>{
diceEl.style.opacity=0;
if(cb)cb();
},800);
},2000);
};

const showQ=()=>{
const q=getQ(curCat);
curQ=q;
catEl.textContent=CAT[curCat];
qEl.textContent=q.q;
ansEl.value="";
fbEl.textContent="";
updateQCnt();
ansEl.style.display="block";
ansEl.focus();
subBtn.style.display="block";

// Extra time for riddles
timeLeft=curCat==='riddles'?(q.time||45):(diffLvl===1?30:diffLvl===2?25:20);
updateTimer();
clearInterval(timer);
if(!paused){
timer=setInterval(()=>{
timeLeft--;
updateTimer();
if(timeLeft<=0){
clearInterval(timer);
wrong("â° Time's up!");
}
},1000);
}
};

const updateTimer=()=>{
timerEl.textContent=`â±ï¸ ${timeLeft}s`;
timerEl.style.color=timeLeft<=5?"#d32f2f":"#1976d2";
};

const checkAns=(a)=>{
if(paused)return;
clearInterval(timer);
let ua=a||ansEl.value.trim().toLowerCase();
const ca=curQ.a.toLowerCase();
totQ++;
if(ua===ca||ua.includes(ca)||ca.includes(ua))correct();
else wrong(`âŒ Wrong! The correct answer is: ${curQ.a}`);
};

const correct=()=>{
sfx.correct.play().catch(()=>{});
fbEl.textContent="âœ… Correct! Excellent work!";
fbEl.className="correct-feedback";
totCorrect++;
streak++;
if(streak>bestStreak)bestStreak=streak;
hp=Math.min(100,hp+3);

if(bossMode){
bossHP-=10;
bossHit();
if(bossHP<=0){
defeatBoss();
return;
}
updateHUD();
updateQCnt();
setTimeout(showBossQ,1500);
return;
}

minions--;
minionDefeated();
updateHUD();
updateProg();

if(minions<=0){
showVictoryAnimation();
fbEl.textContent="ğŸ‰ All minions defeated! Ready for the boss?";
waitingForNextRound=true;
ansEl.style.display='none';
subBtn.style.display='none';
nextRoundBtn.style.display='inline-block';
}else{
setTimeout(nextQ,1500);
}
};

const wrong=(m)=>{
sfx.wrong.play().catch(()=>{});
fbEl.textContent=m;
fbEl.className="wrong-feedback";
streak=0;
hp-=10;

if(bossMode){
updateHUD();
updateQCnt();
if(hp<=0){
gameOver("ğŸ’€ You ran out of HP!");
return;
}
setTimeout(showBossQ,1500);
}else{
minionAttack();
minions--;
updateHUD();
updateProg();
if(hp<=0){
gameOver("ğŸ’€ You ran out of HP!");
return;
}
if(minions<=0){
showVictoryAnimation();
fbEl.textContent="ğŸ‰ All minions defeated! Ready for the boss?";
waitingForNextRound=true;
ansEl.style.display='none';
subBtn.style.display='none';
nextRoundBtn.style.display='inline-block';
}else{
setTimeout(nextQ,1500);
}
}
};

const nextQ=()=>{
minionEl.style.opacity=1;
minionEl.style.transform="scale(1)";
setTimeout(()=>minionEl.style.transform="scale(1.4)",100);
setTimeout(()=>rollDice(()=>{
minionEl.style.opacity=0;
showQ();
}),1000);
};

const startBoss=()=>{
bossMode=true;
fbEl.textContent="ğŸ”¥ BOSS BATTLE! Defeat the boss to advance!";
fbEl.className="";
minionEl.style.opacity=0;
bossEl.style.opacity=0.5;
bossHP=lvl*30;
setTimeout(showBossQ,1500);
};

const showBossQ=()=>{
curCat=getCat();
curQ=getQ(curCat);
catEl.textContent=`${CAT[curCat]} - BOSS BATTLE`;
qEl.textContent=curQ.q;
updateQCnt();
ansEl.value="";
ansEl.style.display="block";
ansEl.focus();
subBtn.style.display="block";
fbEl.textContent="";
timeLeft=curCat==='riddles'?40:20;
updateTimer();
clearInterval(timer);
if(!paused){
timer=setInterval(()=>{
timeLeft--;
updateTimer();
if(timeLeft<=0){
clearInterval(timer);
wrong("â° Time's up!");
}
},1000);
}
};

const bossHit=()=>{
bossEl.classList.add("boss-hit");
setTimeout(()=>bossEl.classList.remove("boss-hit"),400);
};

const defeatBoss=()=>{
clearInterval(timer);
fbEl.textContent="ğŸ‰ BOSS DEFEATED! LEVELING UP!";
fbEl.className="correct-feedback";
bossEl.style.opacity=0.35;
showVictoryAnimation();
lvl++;
hp=Math.min(100,hp+20);
minions=10;
totalMin=10;
bossMode=false;
updateDiff();
updateHUD();
updateProg();
saveProg();
setTimeout(()=>{
fbEl.textContent="ğŸŠ Level Complete! Start the next round when ready!";
waitingForNextRound=true;
ansEl.style.display='none';
subBtn.style.display='none';
nextRoundBtn.style.display='inline-block';
},2500);
};

const updateHUD=()=>{
hpEl.textContent=hp;
lvlEl.textContent=lvl;
minEl.textContent=minions;
stkEl.textContent=streak;
};

const gameOver=(m)=>{
clearInterval(timer);
gameOn=false;
fbEl.textContent=m;
fbEl.className="wrong-feedback";
ansEl.style.display="none";
subBtn.style.display="none";
achEl.style.display="block";
controls.style.display='none';
const acc=totQ>0?((totCorrect/totQ)*100).toFixed(1):0;
achList.innerHTML=`
<li>ğŸ“Š Total Questions: ${totQ}</li>
<li>âœ… Correct Answers: ${totCorrect}</li>
<li>ğŸ¯ Accuracy: ${acc}%</li>
<li>ğŸ”¥ Best Streak: ${bestStreak}</li>
<li>â­ Highest Level: ${lvl}</li>
`;
localStorage.removeItem("bossBattle");
if(musicOn)bgMusic.pause();
};

const saveProg=()=>{
const sd={level:lvl,hp:hp,totalCorrect:totCorrect,totalQuestions:totQ,bestStreak:bestStreak};
localStorage.setItem("bossBattle",JSON.stringify(sd));
};

const loadProg=()=>{
const sv=localStorage.getItem("bossBattle");
if(sv){
const d=JSON.parse(sv);
lvl=d.level||1;
hp=d.hp||100;
totCorrect=d.totalCorrect||0;
totQ=d.totalQuestions||0;
bestStreak=d.bestStreak||0;
updateDiff();
updateHUD();
}
};

const startGame=()=>{
gameOn=true;
lvl=selectedStartLevel;
levelSelector.style.display='none';
startBtn.style.display='none';
D('difficulty').style.display='block';
D('status').style.display='flex';
D('progress-bar-container').style.display='block';
controls.style.display='flex';
updateDiff();
updateHUD();
updateProg();
nextQ();
};

const restartGame=()=>{
hp=100;
lvl=1;
minions=10;
totalMin=10;
streak=0;
bestStreak=0;
totCorrect=0;
totQ=0;
bossMode=false;
gameOn=false;
paused=false;
waitingForNextRound=false;
selectedStartLevel=1;
achEl.style.display="none";
bossEl.style.opacity=0.35;
minionEl.style.opacity=0;
fbEl.textContent="";
catEl.textContent="Get ready...";
qEl.textContent="Select your starting level above!";
qCntEl.textContent="";
ansEl.style.display="none";
subBtn.style.display="none";
startBtn.style.display="none";
nextRoundBtn.style.display="none";
levelSelector.style.display='block';
D('difficulty').style.display='none';
D('status').style.display='none';
D('progress-bar-container').style.display='none';
controls.style.display='none';
document.querySelectorAll('.level-btn').forEach(b=>b.classList.remove('selected'));
pauseBtn.textContent='â¸ï¸ Pause';
pauseBtn.classList.remove('paused');
if(musicOn){
bgMusic.pause();
bgMusic.currentTime=0;
}
updateDiff();
updateHUD();
updateProg();
localStorage.removeItem("bossBattle");
};

subBtn.onclick=()=>checkAns();
ansEl.addEventListener("keyup",(e)=>{if(e.key==="Enter"&&gameOn&&!paused)checkAns();});
startBtn.onclick=startGame;
restartBtn.onclick=restartGame;
updateDiff();
updateHUD();
updateProg();
</script>
</body>
</html>
